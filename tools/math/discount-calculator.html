<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discount Calculator - MultiTools</title>
    <meta name="description" content="Calculate discounts and savings. Free discount calculator tool.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container tool-container">
        <div class="tool-header">
            <h1><i class="fas fa-tag text-warning"></i> Discount Calculator</h1>
            <p class="tool-description">Calculate discounts, savings, and final prices with detailed breakdown.</p>
        </div>

        <div class="row">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-calculator"></i> Calculate Discount</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="originalPrice" class="form-label">Original Price:</label>
                            <input type="number" class="form-control" id="originalPrice" placeholder="Enter original price" value="100" step="0.01">
                        </div>
                        
                        <div class="mb-3">
                            <label for="discountType" class="form-label">Discount Type:</label>
                            <select class="form-select" id="discountType">
                                <option value="percentage">Percentage Discount</option>
                                <option value="fixed">Fixed Amount Discount</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="discountValue" class="form-label">Discount Value:</label>
                            <input type="number" class="form-control" id="discountValue" placeholder="Enter discount value" value="20" step="0.01">
                        </div>
                        
                        <button class="btn btn-warning w-100" id="calculateBtn">
                            <i class="fas fa-calculator"></i> Calculate Discount
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-receipt"></i> Discount Results</h5>
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-4">
                            <h2 class="text-success">Final Price</h2>
                            <h1 id="finalPrice" class="display-4">₹0.00</h1>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h5>Savings</h5>
                                        <h3 id="savingsAmount">₹0.00</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <h5>Discount %</h5>
                                        <h3 id="discountPercent">0%</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-3">
                            <h6>Price Breakdown:</h6>
                            <ul class="list-group">
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>Original Price:</span>
                                    <strong id="originalDisplay">₹0.00</strong>
                                </li>
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>Discount:</span>
                                    <strong class="text-danger" id="discountDisplay">₹0.00</strong>
                                </li>
                                <li class="list-group-item d-flex justify-content-between">
                                    <span>Final Price:</span>
                                    <strong class="text-success" id="finalDisplay">₹0.00</strong>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h5><i class="fas fa-chart-pie"></i> Discount Visualization</h5>
            </div>
            <div class="card-body">
                <div class="progress mb-3">
                    <div class="progress-bar bg-success" id="originalBar" style="width: 0%" role="progressbar">Original Price</div>
                    <div class="progress-bar bg-danger" id="discountBar" style="width: 0%" role="progressbar">Discount</div>
                </div>
                <div class="row">
                    <div class="col-md-4 text-center">
                        <p class="mb-0">Original</p>
                        <p id="originalPercent">100%</p>
                    </div>
                    <div class="col-md-4 text-center">
                        <p class="mb-0">Discount</p>
                        <p id="discountPercentDisplay">0%</p>
                    </div>
                    <div class="col-md-4 text-center">
                        <p class="mb-0">Final</p>
                        <p id="finalPercent">100%</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> Discount Formulas</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Percentage Discount:</h6>
                        <ul>
                            <li>Discount Amount = Original Price × (Discount % / 100)</li>
                            <li>Final Price = Original Price - Discount Amount</li>
                            <li>Discount % = (Discount Amount / Original Price) × 100</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Fixed Amount Discount:</h6>
                        <ul>
                            <li>Final Price = Original Price - Fixed Discount</li>
                            <li>Discount % = (Fixed Discount / Original Price) × 100</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/main.js"></script>
    <script>
        loadHeaderFooter();

        const originalPrice = document.getElementById('originalPrice');
        const discountType = document.getElementById('discountType');
        const discountValue = document.getElementById('discountValue');
        const calculateBtn = document.getElementById('calculateBtn');
        const finalPrice = document.getElementById('finalPrice');
        const savingsAmount = document.getElementById('savingsAmount');
        const discountPercent = document.getElementById('discountPercent');
        const originalDisplay = document.getElementById('originalDisplay');
        const discountDisplay = document.getElementById('discountDisplay');
        const finalDisplay = document.getElementById('finalDisplay');
        const originalBar = document.getElementById('originalBar');
        const discountBar = document.getElementById('discountBar');
        const originalPercent = document.getElementById('originalPercent');
        const discountPercentDisplay = document.getElementById('discountPercentDisplay');
        const finalPercent = document.getElementById('finalPercent');

        function calculateDiscount() {
            const original = parseFloat(originalPrice.value) || 0;
            const discount = parseFloat(discountValue.value) || 0;

            if (original <= 0) {
                alert('Please enter a valid original price!');
                return;
            }

            let discountAmount, final;
            
            if (discountType.value === 'percentage') {
                if (discount > 100) {
                    alert('Discount percentage cannot be greater than 100%!');
                    return;
                }
                discountAmount = original * (discount / 100);
                final = original - discountAmount;
            } else {
                if (discount > original) {
                    alert('Discount amount cannot be greater than original price!');
                    return;
                }
                discountAmount = discount;
                final = original - discountAmount;
            }

            const discountPercentage = (discountAmount / original) * 100;

            // Update display
            finalPrice.textContent = '₹' + final.toFixed(2);
            savingsAmount.textContent = '₹' + discountAmount.toFixed(2);
            discountPercent.textContent = discountPercentage.toFixed(2) + '%';
            originalDisplay.textContent = '₹' + original.toFixed(2);
            discountDisplay.textContent = '₹' + discountAmount.toFixed(2);
            finalDisplay.textContent = '₹' + final.toFixed(2);

            // Update progress bars
            const originalWidth = (original / (original + discountAmount)) * 100;
            const discountWidth = (discountAmount / (original + discountAmount)) * 100;
            
            originalBar.style.width = originalWidth + '%';
            discountBar.style.width = discountWidth + '%';
            originalPercent.textContent = (originalWidth).toFixed(1) + '%';
            discountPercentDisplay.textContent = (discountWidth).toFixed(1) + '%';
            finalPercent.textContent = ((final / original) * 100).toFixed(1) + '%';
        }

        calculateBtn.addEventListener('click', calculateDiscount);
        
        // Update on input change
        originalPrice.addEventListener('input', calculateDiscount);
        discountType.addEventListener('change', calculateDiscount);
        discountValue.addEventListener('input', calculateDiscount);

        // Initial calculation
        calculateDiscount();
        trackToolUsage('Discount Calculator');
    </script>
</body>
</html>