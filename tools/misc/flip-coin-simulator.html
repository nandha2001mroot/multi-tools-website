<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flip a Coin Simulator - MultiTools</title>
    <meta name="description" content="Simulate coin flips. Free coin flip simulator tool.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container tool-container">
        <div class="tool-header">
            <h1><i class="fas fa-coins text-warning"></i> Flip a Coin Simulator</h1>
            <p class="tool-description">Simulate coin flips with realistic animations and statistics.</p>
        </div>

        <div class="row">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-cog"></i> Simulation Settings</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="numFlips" class="form-label">Number of Flips:</label>
                            <input type="number" class="form-control" id="numFlips" value="1" min="1" max="10000">
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="showAnimation" checked>
                            <label class="form-check-label" for="showAnimation">
                                Show Animation
                            </label>
                        </div>
                        
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="recordHistory">
                            <label class="form-check-label" for="recordHistory">
                                Record Flip History
                            </label>
                        </div>
                        
                        <button class="btn btn-warning w-100 mb-3" id="flipBtn">
                            <i class="fas fa-sync"></i> Flip Coin
                        </button>
                        
                        <button class="btn btn-outline-secondary w-100" id="resetBtn">
                            <i class="fas fa-redo"></i> Reset Statistics
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-chart-pie"></i> Results</h5>
                    </div>
                    <div class="card-body text-center">
                        <div id="coinAnimation" class="mb-4">
                            <div class="coin-container">
                                <div class="coin" id="coin">
                                    <div class="coin-front">ðŸª™</div>
                                    <div class="coin-back"> tails</div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="singleResult" class="mb-3">
                            <h2 id="resultText">Ready to flip!</h2>
                        </div>
                        
                        <div class="row">
                            <div class="col-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h5>Heads</h5>
                                        <h3 id="headsCount" class="text-primary">0</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="card">
                                    <div class="card-body">
                                        <h5>Tails</h5>
                                        <h3 id="tailsCount" class="text-warning">0</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-3">
                            <p><strong>Total Flips:</strong> <span id="totalCount">0</span></p>
                            <p><strong>Heads Percentage:</strong> <span id="headsPercent">0%</span></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h5><i class="fas fa-history"></i> Flip History</h5>
            </div>
            <div class="card-body">
                <div id="historyContainer">
                    <p class="text-muted">Flip history will appear here</p>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> About Coin Flipping</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Probability Theory:</h6>
                        <ul>
                            <li>Fair coin has 50% chance of heads/tails</li>
                            <li>Law of large numbers applies</li>
                            <li>Each flip is independent</li>
                            <li>Streaks are normal in randomness</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Real-world Applications:</h6>
                        <ul>
                            <li>Sports team selection</li>
                            <li>Decision making</li>
                            <li>Statistical sampling</li>
                            <li>Game theory</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/main.js"></script>
    <script>
        loadHeaderFooter();

        const numFlips = document.getElementById('numFlips');
        const showAnimation = document.getElementById('showAnimation');
        const recordHistory = document.getElementById('recordHistory');
        const flipBtn = document.getElementById('flipBtn');
        const resetBtn = document.getElementById('resetBtn');
        const coin = document.getElementById('coin');
        const resultText = document.getElementById('resultText');
        const headsCount = document.getElementById('headsCount');
        const tailsCount = document.getElementById('tailsCount');
        const totalCount = document.getElementById('totalCount');
        const headsPercent = document.getElementById('headsPercent');
        const historyContainer = document.getElementById('historyContainer');

        let heads = 0;
        let tails = 0;
        let total = 0;
        let history = [];

        function flipCoin() {
            const count = parseInt(numFlips.value) || 1;
            const animate = showAnimation.checked;
            
            if (count <= 0) {
                alert('Please enter a valid number of flips!');
                return;
            }

            if (animate) {
                animateCoinFlip(count);
            } else {
                simulateFlips(count);
            }
        }

        function animateCoinFlip(count) {
            resultText.textContent = 'Flipping...';
            coin.style.animation = 'spin 1s ease-in-out';
            
            setTimeout(() => {
                simulateFlips(count);
                coin.style.animation = '';
            }, 1000);
        }

        function simulateFlips(count) {
            let currentHeads = 0;
            let currentTails = 0;
            let results = [];
            
            for (let i = 0; i < count; i++) {
                const isHeads = Math.random() > 0.5;
                if (isHeads) {
                    currentHeads++;
                } else {
                    currentTails++;
                }
                results.push(isHeads ? 'Heads' : 'Tails');
            }
            
            // Update global counters
            heads += currentHeads;
            tails += currentTails;
            total += count;
            
            // Update display
            headsCount.textContent = heads;
            tailsCount.textContent = tails;
            totalCount.textContent = total;
            headsPercent.textContent = total > 0 ? Math.round((heads / total) * 100) + '%' : '0%';
            
            // Show last result
            if (count === 1) {
                resultText.textContent = results[0];
                resultText.className = results[0] === 'Heads' ? 'text-primary' : 'text-warning';
            } else {
                resultText.textContent = `${currentHeads} Heads, ${currentTails} Tails`;
                resultText.className = 'text-success';
            }
            
            // Record history
            if (recordHistory.checked) {
                const timestamp = new Date().toLocaleTimeString();
                const historyEntry = {
                    timestamp: timestamp,
                    count: count,
                    heads: currentHeads,
                    tails: currentTails,
                    results: results.slice(0, 10) // Show first 10 results
                };
                history.push(historyEntry);
                updateHistoryDisplay();
            }
        }

        function updateHistoryDisplay() {
            if (history.length === 0) {
                historyContainer.innerHTML = '<p class="text-muted">Flip history will appear here</p>';
                return;
            }
            
            let html = '<div class="table-responsive"><table class="table table-sm"><thead><tr><th>Time</th><th>Flips</th><th>Heads</th><th>Tails</th><th>Results</th></tr></thead><tbody>';
            
            history.slice(-10).reverse().forEach(entry => {
                html += `
                    <tr>
                        <td>${entry.timestamp}</td>
                        <td>${entry.count}</td>
                        <td class="text-primary">${entry.heads}</td>
                        <td class="text-warning">${entry.tails}</td>
                        <td>${entry.results.join(', ')}</td>
                    </tr>
                `;
            });
            
            html += '</tbody></table></div>';
            historyContainer.innerHTML = html;
        }

        function resetStatistics() {
            heads = 0;
            tails = 0;
            total = 0;
            history = [];
            
            headsCount.textContent = '0';
            tailsCount.textContent = '0';
            totalCount.textContent = '0';
            headsPercent.textContent = '0%';
            resultText.textContent = 'Ready to flip!';
            resultText.className = '';
            
            historyContainer.innerHTML = '<p class="text-muted">Flip history will appear here</p>';
        }

        // Add CSS for coin animation
        const style = document.createElement('style');
        style.textContent = `
            .coin-container {
                perspective: 1000px;
                height: 100px;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            
            .coin {
                width: 80px;
                height: 80px;
                position: relative;
                transform-style: preserve-3d;
                transition: transform 1s;
            }
            
            .coin-front, .coin-back {
                position: absolute;
                width: 100%;
                height: 100%;
                backface-visibility: hidden;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 2rem;
                background: linear-gradient(45deg, #ffd700, #ffa500);
                border: 3px solid #d4af37;
            }
            
            .coin-back {
                transform: rotateY(180deg);
            }
            
            @keyframes spin {
                0% { transform: rotateY(0deg); }
                100% { transform: rotateY(1800deg); }
            }
        `;
        document.head.appendChild(style);

        flipBtn.addEventListener('click', flipCoin);
        resetBtn.addEventListener('click', resetStatistics);

        trackToolUsage('Flip a Coin Simulator');
    </script>
</body>
</html>