<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Address Tracker - MultiTools</title>
    <meta name="description" content="Track IP addresses. Free IP address tracker tool.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container tool-container">
        <div class="tool-header">
            <h1><i class="fas fa-network-wired text-primary"></i> IP Address Tracker</h1>
            <p class="tool-description">Track and locate IP addresses with detailed information.</p>
        </div>

        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="mb-3">
                            <label for="ipAddress" class="form-label">Enter IP Address:</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="ipAddress" placeholder="Enter IP address or leave blank for your IP">
                                <button class="btn btn-outline-secondary" type="button" id="detectIpBtn">
                                    <i class="fas fa-sync"></i> Detect My IP
                                </button>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="trackingType" class="form-label">Tracking Type:</label>
                            <select class="form-select" id="trackingType">
                                <option value="basic">Basic Tracking</option>
                                <option value="advanced">Advanced Tracking</option>
                                <option value="bulk">Bulk Tracking</option>
                                <option value="realtime">Real-time Tracking</option>
                            </select>
                        </div>
                        
                        <button class="btn btn-primary w-100 mb-3" id="trackBtn">
                            <i class="fas fa-search-location"></i> Track IP Address
                        </button>
                        
                        <div class="card">
                            <div class="card-header">
                                <h5><i class="fas fa-info-circle"></i> Your IP Information</h5>
                            </div>
                            <div class="card-body">
                                <p><strong>Your Public IP:</strong> <span id="yourIp">Detecting...</span></p>
                                <p><strong>Location:</strong> <span id="yourLocation">Detecting...</span></p>
                                <p><strong>ISP:</strong> <span id="yourISP">Detecting...</span></p>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div id="resultsContainer" style="display: none;">
                            <div class="card">
                                <div class="card-header">
                                    <h5><i class="fas fa-map-marked-alt"></i> Tracking Results</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row mb-3">
                                        <div class="col-md-6">
                                            <p><strong>IP Address:</strong> <span id="trackedIP"></span></p>
                                            <p><strong>Country:</strong> <span id="trackedCountry"></span></p>
                                            <p><strong>Region:</strong> <span id="trackedRegion"></span></p>
                                            <p><strong>City:</strong> <span id="trackedCity"></span></p>
                                        </div>
                                        <div class="col-md-6">
                                            <p><strong>ISP:</strong> <span id="trackedISP"></span></p>
                                            <p><strong>Coordinates:</strong> <span id="trackedCoords"></span></p>
                                            <p><strong>Timezone:</strong> <span id="trackedTimezone"></span></p>
                                            <p><strong>Accuracy:</strong> <span id="trackedAccuracy"></span></p>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-3">
                                        <h6>Location Map:</h6>
                                        <div class="border rounded p-3 text-center" id="mapContainer">
                                            <i class="fas fa-map fa-3x text-muted mb-2"></i>
                                            <p class="text-muted">Map would appear here in real implementation</p>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex gap-2">
                                        <button class="btn btn-success w-100" id="copyBtn">
                                            <i class="fas fa-copy"></i> Copy Results
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="placeholder" class="text-center py-5">
                            <i class="fas fa-network-wired fa-3x text-primary mb-3"></i>
                            <p class="text-muted">Enter an IP address to track its location</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h5><i class="fas fa-history"></i> Tracking History</h5>
            </div>
            <div class="card-body">
                <div id="historyContainer">
                    <p class="text-muted">Tracking history will appear here</p>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> About IP Tracking</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>IP Address Types:</h6>
                        <ul>
                            <li><strong>IPv4:</strong> 32-bit addresses (e.g., 192.168.1.1)</li>
                            <li><strong>IPv6:</strong> 128-bit addresses (e.g., 2001:0db8::1)</li>
                            <li><strong>Public:</strong> Accessible on the internet</li>
                            <li><strong>Private:</strong> Used within local networks</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Tracking Accuracy:</h6>
                        <ul>
                            <li><strong>Country:</strong> 95-99% accuracy</li>
                            <li><strong>Region:</strong> 75-90% accuracy</li>
                            <li><strong>City:</strong> 50-80% accuracy</li>
                            <li><strong>Coordinates:</strong> Varies by provider</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/main.js"></script>
    <script>
        loadHeaderFooter();

        const ipAddress = document.getElementById('ipAddress');
        const trackingType = document.getElementById('trackingType');
        const trackBtn = document.getElementById('trackBtn');
        const detectIpBtn = document.getElementById('detectIpBtn');
        const yourIp = document.getElementById('yourIp');
        const yourLocation = document.getElementById('yourLocation');
        const yourISP = document.getElementById('yourISP');
        const resultsContainer = document.getElementById('resultsContainer');
        const placeholder = document.getElementById('placeholder');
        const trackedIP = document.getElementById('trackedIP');
        const trackedCountry = document.getElementById('trackedCountry');
        const trackedRegion = document.getElementById('trackedRegion');
        const trackedCity = document.getElementById('trackedCity');
        const trackedISP = document.getElementById('trackedISP');
        const trackedCoords = document.getElementById('trackedCoords');
        const trackedTimezone = document.getElementById('trackedTimezone');
        const trackedAccuracy = document.getElementById('trackedAccuracy');
        const copyBtn = document.getElementById('copyBtn');
        const historyContainer = document.getElementById('historyContainer');

        let trackingHistory = [];

        function detectMyIP() {
            // Simulate IP detection
            yourIp.textContent = '192.168.1.1 (Demo)';
            yourLocation.textContent = 'New York, NY, USA';
            yourISP.textContent = 'Example ISP Provider';
        }

        function trackIP() {
            const ip = ipAddress.value.trim() || '192.168.1.1';
            
            if (!validateIP(ip)) {
                alert('Please enter a valid IP address!');
                return;
            }

            // Show loading state
            resultsContainer.style.display = 'none';
            placeholder.innerHTML = '<div class="text-center"><i class="fas fa-spinner fa-spin fa-3x text-muted mb-3"></i><p>Tracking IP address...</p></div>';
            placeholder.style.display = 'block';

            // Simulate API call
            setTimeout(() => {
                // Generate mock data
                const mockData = {
                    ip: ip,
                    country: 'United States',
                    region: 'California',
                    city: 'Los Angeles',
                    isp: 'Example ISP Provider',
                    latitude: '34.0522',
                    longitude: '-118.2437',
                    timezone: 'America/Los Angeles',
                    accuracy: 'City Level'
                };

                // Update display
                trackedIP.textContent = mockData.ip;
                trackedCountry.textContent = mockData.country;
                trackedRegion.textContent = mockData.region;
                trackedCity.textContent = mockData.city;
                trackedISP.textContent = mockData.isp;
                trackedCoords.textContent = `${mockData.latitude}, ${mockData.longitude}`;
                trackedTimezone.textContent = mockData.timezone;
                trackedAccuracy.textContent = mockData.accuracy;

                resultsContainer.style.display = 'block';
                placeholder.style.display = 'none';

                // Add to history
                addToHistory(mockData);
            }, 2000);
        }

        function validateIP(ip) {
            const ipv4Pattern = /^(\d{1,3}\.){3}\d{1,3}$/;
            const ipv6Pattern = /^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;
            return ipv4Pattern.test(ip) || ipv6Pattern.test(ip);
        }

        function addToHistory(data) {
            const historyEntry = {
                timestamp: new Date().toLocaleString(),
                ip: data.ip,
                location: `${data.city}, ${data.region}, ${data.country}`,
                isp: data.isp
            };
            
            trackingHistory.unshift(historyEntry);
            trackingHistory = trackingHistory.slice(0, 10); // Keep only last 10 entries
            
            updateHistoryDisplay();
        }

        function updateHistoryDisplay() {
            if (trackingHistory.length === 0) {
                historyContainer.innerHTML = '<p class="text-muted">Tracking history will appear here</p>';
                return;
            }
            
            let html = '<div class="table-responsive"><table class="table table-sm"><thead><tr><th>Time</th><th>IP Address</th><th>Location</th><th>ISP</th></tr></thead><tbody>';
            
            trackingHistory.forEach(entry => {
                html += `
                    <tr>
                        <td>${entry.timestamp}</td>
                        <td>${entry.ip}</td>
                        <td>${entry.location}</td>
                        <td>${entry.isp}</td>
                    </tr>
                `;
            });
            
            html += '</tbody></table></div>';
            historyContainer.innerHTML = html;
        }

        function copyResults() {
            const results = `IP Address: ${trackedIP.textContent}
Country: ${trackedCountry.textContent}
Region: ${trackedRegion.textContent}
City: ${trackedCity.textContent}
ISP: ${trackedISP.textContent}
Coordinates: ${trackedCoords.textContent}
Timezone: ${trackedTimezone.textContent}
Accuracy: ${trackedAccuracy.textContent}`;
            
            ToolUtils.copyToClipboard(results);
        }

        detectIpBtn.addEventListener('click', detectMyIP);
        trackBtn.addEventListener('click', trackIP);
        copyBtn.addEventListener('click', copyResults);

        // Initialize
        detectMyIP();
        updateHistoryDisplay();
        trackToolUsage('IP Address Tracker');
    </script>
</body>
</html>