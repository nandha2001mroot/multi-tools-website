<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Code Picker - MultiTools</title>
    <meta name="description" content="Pick and convert color codes. Free color code picker tool.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container tool-container">
        <div class="tool-header">
            <h1><i class="fas fa-palette text-dark"></i> Color Code Picker</h1>
            <p class="tool-description">Pick colors and convert between different color formats.</p>
        </div>

        <div class="row">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-palette"></i> Color Picker</h5>
                    </div>
                    <div class="card-body text-center">
                        <div class="mb-3">
                            <input type="color" class="form-control form-control-color" id="colorPicker" value="#ff6b6b">
                        </div>
                        
                        <div class="mb-3">
                            <div id="colorPreview" class="border rounded" style="width: 200px; height: 100px; margin: 0 auto; background-color: #ff6b6b;"></div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="hexInput" class="form-label">Enter Hex Color:</label>
                            <input type="text" class="form-control" id="hexInput" value="#ff6b6b" placeholder="#ff6b6b">
                        </div>
                        
                        <div class="row">
                            <div class="col-6">
                                <label for="redInput" class="form-label">Red (0-255):</label>
                                <input type="number" class="form-control" id="redInput" value="255" min="0" max="255">
                            </div>
                            <div class="col-6">
                                <label for="greenInput" class="form-label">Green (0-255):</label>
                                <input type="number" class="form-control" id="greenInput" value="107" min="0" max="255">
                            </div>
                            <div class="col-6">
                                <label for="blueInput" class="form-label">Blue (0-255):</label>
                                <input type="number" class="form-control" id="blueInput" value="107" min="0" max="255">
                            </div>
                            <div class="col-6">
                                <label for="alphaInput" class="form-label">Alpha (0-1):</label>
                                <input type="number" class="form-control" id="alphaInput" value="1" min="0" max="1" step="0.1">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-code"></i> Color Codes</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="hexOutput" class="form-label">HEX:</label>
                            <input type="text" class="form-control" id="hexOutput" readonly>
                        </div>
                        
                        <div class="mb-3">
                            <label for="rgbOutput" class="form-label">RGB:</label>
                            <input type="text" class="form-control" id="rgbOutput" readonly>
                        </div>
                        
                        <div class="mb-3">
                            <label for="rgbaOutput" class="form-label">RGBA:</label>
                            <input type="text" class="form-control" id="rgbaOutput" readonly>
                        </div>
                        
                        <div class="mb-3">
                            <label for="hslOutput" class="form-label">HSL:</label>
                            <input type="text" class="form-control" id="hslOutput" readonly>
                        </div>
                        
                        <div class="d-flex gap-2">
                            <button class="btn btn-success w-100" id="copyHexBtn">
                                <i class="fas fa-copy"></i> Copy HEX
                            </button>
                            <button class="btn btn-primary w-100" id="copyRgbBtn">
                                <i class="fas fa-copy"></i> Copy RGB
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="card mt-3">
                    <div class="card-header">
                        <h5><i class="fas fa-palette"></i> Color Palette</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-flex flex-wrap gap-2" id="colorPalette">
                            <!-- Color swatches will be added here -->
                        </div>
                        <button class="btn btn-outline-secondary w-100 mt-2" id="addColorBtn">
                            <i class="fas fa-plus"></i> Add Current Color to Palette
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/main.js"></script>
    <script>
        loadHeaderFooter();

        const colorPicker = document.getElementById('colorPicker');
        const colorPreview = document.getElementById('colorPreview');
        const hexInput = document.getElementById('hexInput');
        const redInput = document.getElementById('redInput');
        const greenInput = document.getElementById('greenInput');
        const blueInput = document.getElementById('blueInput');
        const alphaInput = document.getElementById('alphaInput');
        const hexOutput = document.getElementById('hexOutput');
        const rgbOutput = document.getElementById('rgbOutput');
        const rgbaOutput = document.getElementById('rgbaOutput');
        const hslOutput = document.getElementById('hslOutput');
        const copyHexBtn = document.getElementById('copyHexBtn');
        const copyRgbBtn = document.getElementById('copyRgbBtn');
        const colorPalette = document.getElementById('colorPalette');
        const addColorBtn = document.getElementById('addColorBtn');

        let paletteColors = [];

        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        function rgbToHex(r, g, b) {
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }

        function rgbToHsl(r, g, b) {
            r /= 255, g /= 255, b /= 255;
            const max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0; // achromatic
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }

            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }

        function updateColor() {
            const hex = hexInput.value;
            const rgb = hexToRgb(hex);
            
            if (rgb) {
                redInput.value = rgb.r;
                greenInput.value = rgb.g;
                blueInput.value = rgb.b;
                
                colorPicker.value = hex;
                colorPreview.style.backgroundColor = hex;
                
                const alpha = parseFloat(alphaInput.value) || 1;
                
                hexOutput.value = hex;
                rgbOutput.value = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
                rgbaOutput.value = `rgba(${rgb.r}, ${rgb.g}, ${rgb.b}, ${alpha})`;
                
                const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
                hslOutput.value = `hsl(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`;
            }
        }

        function updateFromRgb() {
            const r = parseInt(redInput.value) || 0;
            const g = parseInt(greenInput.value) || 0;
            const b = parseInt(blueInput.value) || 0;
            
            const hex = rgbToHex(r, g, b);
            hexInput.value = hex;
            updateColor();
        }

        function updateFromPicker() {
            hexInput.value = colorPicker.value;
            updateColor();
        }

        colorPicker.addEventListener('input', updateFromPicker);
        hexInput.addEventListener('input', updateColor);
        redInput.addEventListener('input', updateFromRgb);
        greenInput.addEventListener('input', updateFromRgb);
        blueInput.addEventListener('input', updateFromRgb);
        alphaInput.addEventListener('input', updateColor);

        copyHexBtn.addEventListener('click', function() {
            if (hexOutput.value) {
                ToolUtils.copyToClipboard(hexOutput.value);
            }
        });

        copyRgbBtn.addEventListener('click', function() {
            if (rgbOutput.value) {
                ToolUtils.copyToClipboard(rgbOutput.value);
            }
        });

        addColorBtn.addEventListener('click', function() {
            const currentColor = hexOutput.value;
            if (currentColor && !paletteColors.includes(currentColor)) {
                paletteColors.push(currentColor);
                
                const swatch = document.createElement('div');
                swatch.className = 'color-swatch';
                swatch.style.width = '40px';
                swatch.style.height = '40px';
                swatch.style.backgroundColor = currentColor;
                swatch.style.borderRadius = '50%';
                swatch.style.cursor = 'pointer';
                swatch.style.border = '2px solid #ddd';
                
                swatch.addEventListener('click', function() {
                    hexInput.value = currentColor;
                    updateColor();
                });
                
                colorPalette.appendChild(swatch);
            }
        });

        // Initial update
        updateColor();
        trackToolUsage('Color Code Picker');
    </script>
</body>
</html>