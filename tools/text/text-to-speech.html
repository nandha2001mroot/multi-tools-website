<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text to Speech - MultiTools</title>
    <meta name="description" content="Convert text to speech. Free text to speech tool.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container tool-container">
        <div class="tool-header">
            <h1><i class="fas fa-volume-up text-info"></i> Text to Speech</h1>
            <p class="tool-description">Convert text to speech with various voices and languages.</p>
        </div>

        <div class="row">
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-edit"></i> Input Text</h5>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="inputText" class="form-label">Enter text to speak:</label>
                            <textarea class="form-control" id="inputText" rows="8" placeholder="Enter your text here to convert to speech..."></textarea>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="voiceSelect" class="form-label">Voice:</label>
                                <select class="form-select" id="voiceSelect">
                                    <option value="">Auto-select voice</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="languageSelect" class="form-label">Language:</label>
                                <select class="form-select" id="languageSelect">
                                    <option value="en-US">English (US)</option>
                                    <option value="en-GB">English (UK)</option>
                                    <option value="es-ES">Spanish</option>
                                    <option value="fr-FR">French</option>
                                    <option value="de-DE">German</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-4">
                                <label for="rate" class="form-label">Rate:</label>
                                <input type="range" class="form-range" id="rate" min="0.5" max="2" step="0.1" value="1">
                                <span id="rateValue">1.0</span>
                            </div>
                            <div class="col-md-4">
                                <label for="pitch" class="form-label">Pitch:</label>
                                <input type="range" class="form-range" id="pitch" min="0" max="2" step="0.1" value="1">
                                <span id="pitchValue">1.0</span>
                            </div>
                            <div class="col-md-4">
                                <label for="volume" class="form-label">Volume:</label>
                                <input type="range" class="form-range" id="volume" min="0" max="1" step="0.1" value="1">
                                <span id="volumeValue">1.0</span>
                            </div>
                        </div>
                        
                        <div class="d-flex gap-2">
                            <button class="btn btn-success w-50" id="speakBtn">
                                <i class="fas fa-play"></i> Speak
                            </button>
                            <button class="btn btn-warning w-50" id="pauseBtn">
                                <i class="fas fa-pause"></i> Pause
                            </button>
                        </div>
                        <button class="btn btn-danger w-100 mt-2" id="stopBtn">
                            <i class="fas fa-stop"></i> Stop
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="card">
                    <div class="card-header">
                        <h5><i class="fas fa-headphones"></i> Audio Controls</h5>
                    </div>
                    <div class="card-body">
                        <div class="text-center mb-4">
                            <i class="fas fa-volume-up fa-5x text-muted" id="audioIcon"></i>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Current Status:</label>
                            <div class="alert alert-info" id="statusText">
                                Ready to speak
                            </div>
                        </div>
                        
                        <div class="progress mb-3">
                            <div class="progress-bar" id="progressBar" role="progressbar" style="width: 0%"></div>
                        </div>
                        
                        <div class="card">
                            <div class="card-header">
                                <h6><i class="fas fa-list"></i> Available Voices</h6>
                            </div>
                            <div class="card-body">
                                <div id="voicesList">
                                    <p class="text-muted">Loading voices...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/main.js"></script>
    <script>
        loadHeaderFooter();

        const inputText = document.getElementById('inputText');
        const voiceSelect = document.getElementById('voiceSelect');
        const languageSelect = document.getElementById('languageSelect');
        const rate = document.getElementById('rate');
        const pitch = document.getElementById('pitch');
        const volume = document.getElementById('volume');
        const speakBtn = document.getElementById('speakBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const stopBtn = document.getElementById('stopBtn');
        const audioIcon = document.getElementById('audioIcon');
        const statusText = document.getElementById('statusText');
        const progressBar = document.getElementById('progressBar');
        const voicesList = document.getElementById('voicesList');

        // Update value displays
        rate.addEventListener('input', () => document.getElementById('rateValue').textContent = rate.value);
        pitch.addEventListener('input', () => document.getElementById('pitchValue').textContent = pitch.value);
        volume.addEventListener('input', () => document.getElementById('volumeValue').textContent = volume.value);

        // Load voices
        function loadVoices() {
            const voices = speechSynthesis.getVoices();
            voicesList.innerHTML = '';
            
            voices.forEach((voice, index) => {
                const option = document.createElement('option');
                option.value = voice.name;
                option.textContent = `${voice.name} (${voice.lang})`;
                voiceSelect.appendChild(option);
                
                const div = document.createElement('div');
                div.className = 'small';
                div.textContent = `${voice.name} - ${voice.lang}`;
                voicesList.appendChild(div);
            });
        }

        // Initialize voices
        if (typeof speechSynthesis !== 'undefined') {
            speechSynthesis.onvoiceschanged = loadVoices;
            loadVoices();
        }

        // Speak function
        function speak() {
            if (!inputText.value.trim()) {
                alert('Please enter text to speak!');
                return;
            }

            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(inputText.value);
                
                utterance.rate = parseFloat(rate.value);
                utterance.pitch = parseFloat(pitch.value);
                utterance.volume = parseFloat(volume.value);
                
                if (voiceSelect.value) {
                    const voices = speechSynthesis.getVoices();
                    utterance.voice = voices.find(v => v.name === voiceSelect.value);
                }
                
                utterance.onstart = () => {
                    statusText.textContent = 'Speaking...';
                    statusText.className = 'alert alert-success';
                    audioIcon.className = 'fas fa-volume-up fa-5x text-success';
                };
                
                utterance.onend = () => {
                    statusText.textContent = 'Finished speaking';
                    statusText.className = 'alert alert-info';
                    audioIcon.className = 'fas fa-volume-up fa-5x text-muted';
                    progressBar.style.width = '0%';
                };
                
                utterance.onerror = () => {
                    statusText.textContent = 'Error occurred';
                    statusText.className = 'alert alert-danger';
                    audioIcon.className = 'fas fa-volume-up fa-5x text-danger';
                };
                
                speechSynthesis.speak(utterance);
            } else {
                alert('Text-to-speech is not supported in your browser.');
            }
        }

        speakBtn.addEventListener('click', speak);
        pauseBtn.addEventListener('click', () => speechSynthesis.pause());
        stopBtn.addEventListener('click', () => speechSynthesis.cancel());

        trackToolUsage('Text to Speech');
    </script>
</body>
</html>