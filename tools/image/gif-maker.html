<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIF Maker - MultiTools</title>
    <meta name="description" content="Create animated GIFs from images. Free GIF maker tool.">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="../../css/style.css" rel="stylesheet">
</head>
<body>
    <div id="header-placeholder"></div>

    <div class="container tool-container">
        <div class="tool-header">
            <h1><i class="fas fa-play-circle text-primary"></i> GIF Maker</h1>
            <p class="tool-description">Create animated GIFs from a series of images.</p>
        </div>

        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="mb-3">
                            <label for="imageFiles" class="form-label">Upload Images:</label>
                            <input type="file" class="form-control" id="imageFiles" accept="image/*" multiple>
                        </div>
                        
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="delay" class="form-label">Delay (ms):</label>
                                <input type="number" class="form-control" id="delay" value="500" min="100" max="5000">
                            </div>
                            <div class="col-md-6">
                                <label for="loop" class="form-label">Loop Count:</label>
                                <input type="number" class="form-control" id="loop" value="0" min="0" max="100">
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Preview Images:</label>
                            <div id="imagePreview" class="d-flex flex-wrap gap-2"></div>
                        </div>
                        
                        <button class="btn btn-primary w-100" id="createGifBtn">
                            <i class="fas fa-cogs"></i> Create GIF
                        </button>
                    </div>
                    <div class="col-lg-6">
                        <div class="mb-3">
                            <label class="form-label">GIF Preview:</label>
                            <div id="gifPreview" class="text-center">
                                <p class="text-muted">Upload images to create GIF</p>
                            </div>
                        </div>
                        
                        <button class="btn btn-success w-100" id="downloadGifBtn" style="display: none;">
                            <i class="fas fa-download"></i> Download GIF
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h5><i class="fas fa-info-circle"></i> How to Use</h5>
            </div>
            <div class="card-body">
                <ol>
                    <li>Upload multiple images (JPG, PNG, etc.)</li>
                    <li>Set delay between frames and loop count</li>
                    <li>Click "Create GIF" to generate your animated GIF</li>
                    <li>Preview and download your created GIF</li>
                </ol>
                <div class="alert alert-info">
                    <i class="fas fa-lightbulb"></i> <strong>Tip:</strong> For best results, use images of the same dimensions.
                </div>
            </div>
        </div>
    </div>

    <div id="footer-placeholder"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/main.js"></script>
    <script>
        loadHeaderFooter();

        const imageFiles = document.getElementById('imageFiles');
        const delay = document.getElementById('delay');
        const loop = document.getElementById('loop');
        const imagePreview = document.getElementById('imagePreview');
        const gifPreview = document.getElementById('gifPreview');
        const createGifBtn = document.getElementById('createGifBtn');
        const downloadGifBtn = document.getElementById('downloadGifBtn');

        let uploadedImages = [];

        imageFiles.addEventListener('change', function(e) {
            if (e.target.files) {
                uploadedImages = [];
                imagePreview.innerHTML = '';
                
                Array.from(e.target.files).forEach((file, index) => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        uploadedImages.push(e.target.result);
                        
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        img.className = 'img-thumbnail';
                        img.style.width = '100px';
                        img.style.height = '100px';
                        img.style.objectFit = 'cover';
                        
                        imagePreview.appendChild(img);
                    };
                    reader.readAsDataURL(file);
                });
            }
        });

        createGifBtn.addEventListener('click', function() {
            if (uploadedImages.length === 0) {
                alert('Please upload at least one image!');
                return;
            }

            // In a real implementation, this would use a GIF library
            // For demo purposes, we'll show a placeholder
            gifPreview.innerHTML = `
                <div class="alert alert-warning">
                    <i class="fas fa-exclamation-triangle"></i> 
                    <strong>Note:</strong> This is a demo. A real GIF maker would use a library like GIF.js
                </div>
                <img src="${uploadedImages[0]}" class="img-fluid" alt="GIF Preview">
            `;
            downloadGifBtn.style.display = 'block';
        });

        downloadGifBtn.addEventListener('click', function() {
            if (uploadedImages.length === 0) {
                alert('No GIF to download!');
                return;
            }
            
            alert('In a real implementation, this would download the created GIF. You would need to integrate a GIF creation library.');
        });

        trackToolUsage('GIF Maker');
    </script>
</body>
</html>